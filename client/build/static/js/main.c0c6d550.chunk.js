(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{63:function(e,t,a){e.exports=a(97)},97:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(19),o=a.n(l),s=a(24),c=a(4),u=(a(68),a(100)),i=a(99),m=a(10),p=a(11),d=a(13),h=a(12),E=a(7),b=a(23),f=a.n(b),g=a(35),v=a(21),y=a.n(v),O=function(e){return{type:"RECEIVE_USER",user:e}},C=function(e){return{type:"RECEIVE_ERROR",msg:e}},j=function(){return function(){var e=Object(g.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("/api/logout");case 2:if("ok"!==(a=e.sent).data.status){e.next=7;break}return e.abrupt("return",t({type:"LOGOUT_USER"}));case 7:return e.abrupt("return",t(C(a.data.msg)));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=a(101),w=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).onChangeEmail=function(e){r.setState({email:e.target.value})},r.onChangePassword=function(e){r.setState({password:e.target.value})},r.onChangeRole=function(e){r.setState({role:e.target.value})},r.onSubmit=function(e){e.preventDefault();var t,a={email:r.state.email,password:r.state.password,role:r.state.role};r.props.dispatch((t=a,function(){var e=Object(g.a)(f.a.mark((function e(a){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("/api/register",t);case 2:if(r=e.sent,console.log(r),n=r.data.user,"ok"!==r.data.status){e.next=9;break}return e.abrupt("return",a(O(n)));case 9:return e.abrupt("return",a(C(r.data.msg)));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},r.state={email:"",password:"",role:"Customer"},r}return Object(p.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"container"},null!==this.props.userId&&n.a.createElement(c.a,{to:"/home"}),this.props.errors&&n.a.createElement(k.a,{variant:"warning"},this.props.errors),n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("h2",{className:"form-title"},"Sign Up"),n.a.createElement("p",{style:{color:"red"}},"*required")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Email Address",n.a.createElement("sup",{style:{color:"red"}},"*")),n.a.createElement("input",{type:"email",className:"form-control",placeholder:"email@example.com",value:this.state.email,onChange:this.onChangeEmail,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Password",n.a.createElement("sup",{style:{color:"red"}},"*")),n.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",value:this.state.password,onChange:this.onChangePassword,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Role",n.a.createElement("sup",{style:{color:"red"}},"*")),n.a.createElement("select",{className:"form=control",id:"userrole",onChange:this.onChangeRole,required:!0},n.a.createElement("option",null,"Customer"),n.a.createElement("option",null,"Admin"))),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Register"}))))}}]),a}(n.a.Component),S=Object(E.b)((function(e){return{userId:e.userId,errors:e.msg}}))(w),R=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).onChangeEmail=function(e){r.setState({email:e.target.value})},r.onChangePassword=function(e){r.setState({password:e.target.value})},r.onSubmit=function(e){e.preventDefault();var t,a={email:r.state.email,password:r.state.password};r.props.dispatch((t=a,function(){var e=Object(g.a)(f.a.mark((function e(a){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("/api/login",t);case 2:if(r=e.sent,n=r.data.user,"ok"!==r.data.status){e.next=8;break}return e.abrupt("return",a(O(n)));case 8:return e.abrupt("return",a(C(r.data.msg)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},r.state={email:"",password:""},r}return Object(p.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"container"},null!==this.props.userId&&n.a.createElement(c.a,{to:"/home"}),this.props.errors&&n.a.createElement(k.a,{variant:"warning"},this.props.errors),n.a.createElement("form",{onSubmit:this.onSubmit},n.a.createElement("div",{className:"form-group"},n.a.createElement("h2",{className:"form-title"},"Sign In"),n.a.createElement("p",{style:{color:"red"}},"*required")),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Email Address",n.a.createElement("sup",{style:{color:"red"}},"*")),n.a.createElement("input",{type:"email",className:"form-control",placeholder:"email@example.com",value:this.state.email,onChange:this.onChangeEmail,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Password",n.a.createElement("sup",{style:{color:"red"}},"*")),n.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",value:this.state.password,onChange:this.onChangePassword,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Login"}))))}}]),a}(n.a.Component),N=Object(E.b)((function(e){return{userId:e.userId,errors:e.msg}}))(R),x=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(m.a)(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).handleSubmit=function(t){t.preventDefault(),e.props.dispatch(j())},e}return Object(p.a)(a,[{key:"render",value:function(){return n.a.createElement("form",{method:"POST",onSubmit:this.handleSubmit},n.a.createElement("button",{type:"submit",className:"btn btn-success"},"Logout"))}}]),a}(n.a.Component),I=Object(E.b)((function(e){return{}}))(x),A=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).handleGreen=function(e){"Admin"===r.props.role&&r.setState({text:"Green"})},r.handleRed=function(e){"Admin"===r.props.role&&r.setState({text:"Red"})},r.state={text:""},r}return Object(p.a)(a,[{key:"render",value:function(){return n.a.createElement("center",null,n.a.createElement("div",{className:"container",style:{margin:50,backgroundColor:"black"}},null===this.props.userId&&n.a.createElement(c.a,{to:"/signin"}),n.a.createElement("h2",{style:{color:"blue",padding:10}},"Welcome to Home Page!!"),n.a.createElement("button",{className:"btn btn-success",onClick:this.handleGreen,style:{margin:50}},"Green Button"),"Admin"===this.props.role&&n.a.createElement("button",{className:"btn btn-danger",onClick:this.handleRed},"Red Button"),n.a.createElement("center",{style:{padding:10}},n.a.createElement("h2",{style:"Green"===this.state.text?{color:"green"}:{color:"red"}},this.state.text))))}}]),a}(n.a.Component),P=Object(E.b)((function(e){return{userId:e.userId,role:e.role}}))(A),U=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).handleClick=function(e){r.setState({role:e.target.value})},r.handleSubmit=function(e){e.preventDefault(),r.state.prevRole!==r.state.role&&y.a.put("/api/put",{email:r.props.email,role:r.state.role}).then((function(e){alert("Role changed successfully")})).catch((function(e){console.log(e)}))},r.state={prevRole:e.role,role:e.role},r}return Object(p.a)(a,[{key:"render",value:function(){return n.a.createElement("form",{method:"PUT",action:"",onSubmit:this.handleSubmit},"Admin"===this.props.role&&n.a.createElement("div",null,n.a.createElement("input",{type:"radio",name:"role",value:"Admin",onChange:this.handleClick,checked:!0}),"Admin",n.a.createElement("br",null),n.a.createElement("input",{type:"radio",name:"role",value:"Customer",onChange:this.handleClick}),"Customer"),"Customer"===this.props.role&&n.a.createElement("div",null,n.a.createElement("input",{type:"radio",name:"role",value:"Admin",onChange:this.handleClick}),"Admin",n.a.createElement("br",null),n.a.createElement("input",{type:"radio",name:"role",value:"Customer",onChange:this.handleClick,checked:!0}),"Customer"),n.a.createElement("button",{type:"submit",className:"btn btn-primary btn-sm"},"Change Role"))}}]),a}(n.a.Component);var L=function(e){return n.a.createElement("tr",null,n.a.createElement("td",null,e.id),n.a.createElement("td",null,e.email),n.a.createElement("td",null,n.a.createElement(U,{email:e.email,role:e.role})))},q=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(m.a)(this,a),(r=t.call(this,e)).state={array:[]},r}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;y()("/api/get").then((function(t){e.setState({array:t.data})})).catch((function(e){return console.log(e)}))}},{key:"renderRow",value:function(){return this.state.array.map((function(e,t){return n.a.createElement(L,{key:t,id:t+1,email:e.email,role:e.Role.role})}))}},{key:"render",value:function(){return n.a.createElement("div",{className:"container",style:{padding:10}},"Admin"!==this.props.role&&n.a.createElement(c.a,{to:"/home"}),n.a.createElement("div",null,n.a.createElement("h2",null,"Users List"),n.a.createElement("p",{style:{color:"red"}},"* To change a user's role, click on the appropriate radio button and then click 'Change Role' button")),n.a.createElement("table",{className:"table table-dark table-striped"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("td",null,"Sl No"),n.a.createElement("td",null,"email"),n.a.createElement("td",null,"role"))),n.a.createElement("tbody",null,this.renderRow())))}}]),a}(n.a.Component),G=Object(E.b)((function(e){return{role:e.role}}))(q);var T=Object(E.b)((function(e){return{email:e.email,userId:e.userId,role:e.role}}))((function(e){return n.a.createElement("div",null,n.a.createElement(u.a,{bg:"dark",variant:"dark",expand:"lg"},n.a.createElement(u.a.Brand,{href:"/"},"Auth App"),n.a.createElement(i.a,{className:"mr-auto"},n.a.createElement(i.a.Link,{href:"/signup"},"SignUp"),n.a.createElement(i.a.Link,{href:"/signin"},"SignIn"),n.a.createElement(i.a.Link,{href:"/home"},"Home"),"Admin"===e.role&&n.a.createElement(i.a.Link,{href:"/users"},"All Users"),null!==e.userId&&n.a.createElement(I,null),null!==e.email&&n.a.createElement("p",{style:{color:"white",marginLeft:100,marginTop:8,fontSize:18}},"Hello ",e.email.split("@")[0]))),n.a.createElement(s.a,null,n.a.createElement(c.d,null,n.a.createElement(c.b,{exact:!0,path:"/signup",component:S}),n.a.createElement(c.b,{exact:!0,path:"/signin",component:N}),n.a.createElement(c.b,{exact:!0,path:"/home",component:P}),n.a.createElement(c.b,{exact:!0,path:"/users",component:G}))))})),_=a(17),D=a(30),B={userId:null,role:null,email:null,msg:""};var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(console.log("reducer",e,t),Object.freeze(e),t.type){case"RECEIVE_USER":var a=Object(D.a)(Object(D.a)({},e),{},{email:t.user.email,userId:t.user.id,role:t.user.role,msg:""});return a;case"LOGOUT_USER":return B;case"RECEIVE_ERROR":return Object(D.a)(Object(D.a)({},e),{},{msg:t.msg});default:return e}},H=a(60),z=a(41),J=a(61),M={key:"root",storage:a.n(J).a},W=Object(z.a)(M,V),F=Object(_.d)(W,Object(_.a)(H.a)),K=Object(z.b)(F),Q=a(62);o.a.render(n.a.createElement(E.a,{store:F},n.a.createElement(Q.a,{loading:null,persistor:K},n.a.createElement(T,null))),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.c0c6d550.chunk.js.map